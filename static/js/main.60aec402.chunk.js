(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{13:function(t,e,a){"use strict";function n(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];clearTimeout(e),n||(e=setTimeout(function(){clearTimeout(e),t.apply(void 0,i)},a))}}function s(){o();for(var t=0,e="",a="";t<33;){var n=Math.floor(98*Math.random()+1),s=Math.floor(4*Math.random()+2);e+='<div class="drop" style="left: '+3*(t+=s)+"%; bottom: "+(s+s-1+100)+"%; animation-delay: 0."+n+"s; animation-duration: 0.5"+n+'s;"><div class="stem" style="animation-delay: 0.'+n+"s; animation-duration: 0.5"+n+'s;"></div><div class="splat" style="animation-delay: 0.'+n+"s; animation-duration: 0.5"+n+'s;"></div></div>',a+='<div class="drop" style="right: '+3*t+"%; bottom: "+(s+s-1+100)+"%; animation-delay: 0."+n+"s; animation-duration: 0.5"+n+'s;"><div class="stem" style="animation-delay: 0.'+n+"s; animation-duration: 0.5"+n+'s;"></div><div class="splat" style="animation-delay: 0.'+n+"s; animation-duration: 0.5"+n+'s;"></div></div>'}document.getElementsByClassName("front-row")[0].innerHTML=e,document.getElementsByClassName("back-row")[0].innerHTML=a}function i(){o();for(var t=0,e="";t<50;){var a=Math.floor(98*Math.random()+1);t+=Math.floor(4*Math.random()+2),e+=a%2?'<div class="snowflake"></div>':'<div class="snowflake snowflake snowflake--big"></div>',document.getElementsByClassName("snowflakes")[0].innerHTML=e}}function o(){for(var t=document.getElementById("front-row");t.firstChild;)t.removeChild(t.firstChild);for(t=document.getElementById("back-row");t.firstChild;)t.removeChild(t.firstChild);for(t=document.getElementsByClassName("snowflakes")[0];t.firstChild;)t.removeChild(t.firstChild)}function c(t){for(var e=document.getElementById(t),a=e.getContext("2d"),n=0;n<200;n++){var s=Math.random()*e.offsetWidth,i=Math.random()*e.offsetHeight;a.fillStyle="white",a.fillRect(s,i,1,1)}}function r(t){return t.length?t[0].toUpperCase()+t.substr(1):t}a.d(e,"b",function(){return n}),a.d(e,"d",function(){return s}),a.d(e,"e",function(){return i}),a.d(e,"c",function(){return o}),a.d(e,"f",function(){return c}),a.d(e,"a",function(){return r})},20:function(t,e,a){"use strict";var n=a(9),s=a(10),i=a(14),o=a(11),c=a(12),r=a(0),l=a.n(r),u=(a(32),a(13)),h=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(i.a)(this,Object(o.a)(e).call(this,t)))._isMounted=!1,a.getLocationSuggestion=Object(u.b)(function(t){a.setState({selected:!1,suggestions:[],activeLocation:0},function(){t&&t.trim().length&&(a.getSuggestions=fetch("https://restcountries.eu/rest/v2/name/".concat(t)).then(function(t){return t.json()}).then(function(e){return a._isMounted&&a.setState(function(t,a){return t.selected||e.status?{suggestions:[]}:{suggestions:e.map(function(t){return{id:t.alpha3Code,name:t.name,region:t.region,latitude:t.latlng[0],longitude:t.latlng[1]}})}}),fetch("https://wft-geo-db.p.rapidapi.com/v1/geo/cities?limit=10&namePrefix=".concat(t),{headers:{"x-rapidapi-key":"95402d4e39msha9374dd685e1f78p1655c6jsn9d03f517101c","x-rapidapi-host":"wft-geo-db.p.rapidapi.com",useQueryString:!0}})}).then(function(t){return t.json()}).then(function(t){a._isMounted&&a.setState(function(e){return e.selected?{suggestions:[]}:{suggestions:e.suggestions.concat(t.data)}})}))})},1e3),a.handleChange=function(t){var e=t.target.value;a.setState({searchValue:e}),a.getLocationSuggestion(!1,e)},a.handleSubmit=function(t){t&&t.preventDefault()},a.selectCurrentLocation=function(){fetch("https://geolocation-db.com/json/").then(function(t){return t.json()}).then(function(t){a.setState({searchValue:t.city,lat:t.latitude,lon:t.longitude,suggestions:[],selected:!0},function(){a.getLocationSuggestion(!0,null),a.props.handleSearch(a.state.searchValue,a.state.lat,a.state.lon)})})},a.selectCity=function(t){a.setState({searchValue:t.target.dataset.name,lat:t.target.dataset.lat,lon:t.target.dataset.lon,suggestions:[],selected:!0},function(){a.getLocationSuggestion(!0,null),a.props.handleSearch(a.state.searchValue,a.state.lat,a.state.lon)})},a.handleKeySelectLocation=function(t){function e(){var t=this.suggestListRef.current.scrollTop,e=t+300,a=38*this.state.activeLocation;(a<t||a+38>e)&&(this.suggestListRef.current.scrollTop=a)}13===t.keyCode?a.setState(function(t){return{searchValue:t.suggestions[t.activeLocation].name,lat:t.suggestions[t.activeLocation].latitude,lon:t.suggestions[t.activeLocation].longitude,suggestions:[],selected:!0}},function(){a.getLocationSuggestion(!0,null),a.props.handleSearch(a.state.searchValue,a.state.lat,a.state.lon)}):40===t.keyCode?a.setState(function(t){return t.activeLocation==t.suggestions.length-1?{activeLocation:0}:{activeLocation:t.activeLocation+1}},e):38===t.keyCode&&a.setState(function(t){return 0==t.activeLocation?{activeLocation:t.suggestions.length-1}:{activeLocation:t.activeLocation-1}},e)},a.state={searchValue:t.searchValue?t.searchValue:"",suggestions:[],activeLocation:0,selected:!1},a.suggestListRef=l.a.createRef(),a}return Object(c.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this.getLocationSuggestion(!0,null),this._isMounted=!1}},{key:"render",value:function(){var t=this;return l.a.createElement("form",{onSubmit:this.handleSubmit,onKeyUp:this.handleKeySelectLocation,className:"search-form"},this.props.showTitle&&l.a.createElement("h1",{className:"search-title"},"Check weather at ..."),l.a.createElement("div",{className:"search-box"+(this.state.suggestions.length?" search-box--with-suggestions":"")},l.a.createElement("input",{type:"text",className:"search-input",value:this.state.searchValue,onChange:this.handleChange,placeholder:"Search location"}),l.a.createElement("button",{type:"button",className:"icon-btn current-location-btn",onClick:this.selectCurrentLocation},l.a.createElement("i",{className:"material-icons"},"gps_fixed")),l.a.createElement("button",{type:"submit",value:"submit",className:"icon-btn"},l.a.createElement("i",{className:"material-icons"},"search"))),l.a.createElement("ul",{className:"suggest-list"+(this.state.suggestions.length?" suggest-list--active":""),ref:this.suggestListRef},this.state.suggestions.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return l.a.createElement("li",{key:e.id,className:"suggest-list__item "+(a===t.state.activeLocation?"suggest-list__item--active":""),onClick:t.selectCity,"data-name":e.name,"data-lat":e.latitude,"data-lon":e.longitude},e.name," (",e.region,")")})))}}]),e}(r.Component);e.a=h},26:function(t,e,a){t.exports=a(38)},31:function(t,e,a){},32:function(t,e,a){},37:function(t,e,a){},38:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),i=a(22),o=a.n(i),c=a(9),r=a(10),l=a(14),u=a(11),h=a(12),d=a(8),m=a(1),g=(a(31),a(13)),f=a(20);var v=Object(m.g)(function(t){var e=t.location.pathname.slice(1),a=JSON.parse(window.localStorage.getItem("favoriteLocations"))||[];return s.a.createElement("header",{className:"App-header "+(e.length>0?"":"start-header")},s.a.createElement(d.b,{to:a.length?"/favorite":"/"},s.a.createElement("div",{className:"App-logo",alt:"logo"})),e.length>0&&s.a.createElement(f.a,{showTitle:!1,handleSearch:function(e,a,n){e=e.trim(),t.setSearchValue(e),e&&e.length>2&&(t.setLocation(a,n),t.history.push("/weather/".concat(e,"/").concat(a,"/").concat(n)))},searchValue:t.searchValue||""}))});var p=function(){return s.a.createElement("div",null,"Loading...")},b=Object(n.lazy)(function(){return a.e(7).then(a.bind(null,292))}),S=Object(n.lazy)(function(){return Promise.all([a.e(0),a.e(3),a.e(6)]).then(a.bind(null,293))}),y=Object(n.lazy)(function(){return Promise.all([a.e(0),a.e(5)]).then(a.bind(null,298))}),E=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).setSearchValue=function(t){a.setState({searchValue:t})},a.setLocation=function(t,e){a.setState({lat:t,lon:e})},a.setTimeAndRain=function(t,e,n,s){a.setState({rain:s}),e-t===1?a.setState({time:"dawn"}):t===e?a.setState({time:"sunrise"}):t>e&&t<=12?a.setState({time:"morning"}):t>12&&t<n?a.setState({time:"afternoon"}):t===n?a.setState({time:"sunset"}):n-t===1?a.setState({time:"dusk"}):a.setState({time:"night"})},a.resetBackground=function(){a.setState({time:"start",rain:!1})},a.state={searchValue:"",lat:0,lon:0,time:"start",rain:!1,hasError:!1},a}return Object(h.a)(e,t),Object(r.a)(e,[{key:"componentDidCatch",value:function(t,e){console.log(t,e)}},{key:"componentDidMount",value:function(){Object(g.f)("starfield")}},{key:"render",value:function(){var t=this;return this.state.hasError?s.a.createElement("h1",null,"Something went wrong..."):s.a.createElement(d.a,null,s.a.createElement("div",{className:"App bg-".concat(this.state.time," ").concat(this.state.rain?"bg-rain":"")},s.a.createElement(v,{setSearchValue:this.setSearchValue,setLocation:this.setLocation,searchValue:this.state.searchValue,lat:this.state.lat,lon:this.state.lon}),s.a.createElement(n.Suspense,{fallback:s.a.createElement(p,null)},s.a.createElement(m.b,{path:"/",exact:!0,render:function(e){return s.a.createElement(b,Object.assign({},e,{setSearchValue:t.setSearchValue,setLocation:t.setLocation,searchValue:t.state.searchValue,lat:t.state.lat,lon:t.state.lon,resetBackground:t.resetBackground}))}}),s.a.createElement(m.b,{path:"/weather/:name/:lat/:lon",render:function(e){return s.a.createElement(S,Object.assign({},e,{searchValue:t.state.searchValue,setTimeAndRain:t.setTimeAndRain}))}}),s.a.createElement(m.b,{path:"/favorite",render:function(e){return s.a.createElement(y,Object.assign({},e,{resetBackground:t.resetBackground}))}})),s.a.createElement("div",{className:"bg-start__top"}),s.a.createElement("div",{className:"bg-start__bottom"},s.a.createElement("canvas",{id:"starfield",width:"1500",height:"1500"}))))}}],[{key:"getDerivedStateFromError",value:function(t){return{hasError:!0}}}]),e}(n.Component);a(37);o.a.render(s.a.createElement(E,null),document.getElementById("root"))}},[[26,2,4]]]);
//# sourceMappingURL=main.60aec402.chunk.js.map